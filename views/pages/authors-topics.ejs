<% layout('layout/main') %>

<div class="container mt-4">
    <div class="row">
        <!-- Authors Section -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h2 class="h4 mb-0">Autores</h2>
                    <% if (typeof user !== 'undefined') { %>
                        <a href="/authors/new" class="btn btn-primary btn-sm">Novo Autor</a>
                    <% } %>
                </div>
                <div class="card-body">
                    <% if (authors && authors.length > 0) { %>
                        <div class="list-group">
                            <% authors.forEach(author => { %>
                                <div class="list-group-item">
                                    <div class="author-info">
                                        <h5 class="mb-1"><%= author.name %></h5>
                                        <% if (author.nationality) { %>
                                            <small class="text-muted"><%= author.nationality %></small>
                                        <% } %>
                                    </div>
                                    <% if (author.bio) { %>
                                        <p class="mb-1 text-muted"><%= author.bio %></p>
                                    <% } %>
                                    <div class="quotes-container mt-3">
                                        <h6>Frases:</h6>
                                        <% if (author.quotes && author.quotes.length > 0) { %>
                                            <% author.quotes.forEach(quote => { %>
                                                <div class="card mb-2">
                                                    <div class="card-body py-2">
                                                        <p class="mb-0">"<%= quote.text %>"</p>
                                                        <% if (quote.topics && quote.topics.length > 0) { %>
                                                            <div class="mt-1">
                                                                <% quote.topics.forEach(topic => { %>
                                                                    <span class="badge bg-secondary me-1">#<%= topic.name %></span>
                                                                <% }) %>
                                                            </div>
                                                        <% } %>
                                                    </div>
                                                </div>
                                            <% }) %>
                                        <% } else { %>
                                            <p class="text-muted">Nenhuma frase encontrada.</p>
                                        <% } %>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    <% } else { %>
                        <p class="text-muted">Nenhum autor cadastrado.</p>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Topics Section -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h2 class="h4 mb-0">Tópicos</h2>
                    <% if (typeof user !== 'undefined') { %>
                        <a href="/topics/new" class="btn btn-primary btn-sm">Novo Tópico</a>
                    <% } %>
                </div>
                <div class="card-body">
                    <% if (topics && topics.length > 0) { %>
                        <div class="list-group">
                            <% topics.forEach(topic => { %>
                                <div class="list-group-item">
                                    <h5 class="mb-2"><%= topic.name %></h5>
                                    <div class="quotes-container">
                                        <h6>Frases:</h6>
                                        <% if (topic.quotes && topic.quotes.length > 0) { %>
                                            <% topic.quotes.forEach(quote => { %>
                                                <div class="card mb-2">
                                                    <div class="card-body py-2">
                                                        <p class="mb-0">"<%= quote.text %>"</p>
                                                        <footer class="blockquote-footer">
                                                            - <%= quote.author.name %>
                                                        </footer>
                                                    </div>
                                                </div>
                                            <% }) %>
                                        <% } else { %>
                                            <p class="text-muted">Nenhuma frase encontrada.</p>
                                        <% } %>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    <% } else { %>
                        <p class="text-muted">Nenhum tópico cadastrado.</p>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>